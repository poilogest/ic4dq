import matplotlib.pyplot as plt
import matplotlib.ticker as ticker
import numpy as np

x = [0.04, 0.06, 0.08, 0.10, 0.12, 0.14, 0.16, 0.18, 0.20]
# social welfare
# y1 = [4902734.759650409, 4800819.81362390, 4705002.12937221, 4604903.61469750, 4585252.15633787, 4569054.67966126, 4558222.81307520, 4554073.08428770, 4543939.34096647, 4539340.12570428, 4529305.35398973] # NE linear
# y2 = [4898832.049726969, 4883229.80146947, 4862785.46068361, 4843873.85865701, 4828778.08421030, 4801416.01554947, 4770737.73039329, 4743235.93289523, 4707857.29432957, 4688600.81872798, 4680285.54651794] # NE quadratic
# y3 = [4903329.27737601, 4807705.731136674, 4768512.220668011, 4745156.684290063, 4727542.824109944, 4714838.935329553, 4702053.518860062, 4696512.872762036, 4684732.347070065, 4678959.15515389, 4671401.126726128] # SWM linear
# y4 = [4897606.1366443075, 4884204.666436202, 4870039.681707355, 4849947.620782653, 4828734.405601809, 4818533.471070329, 4804196.961237503, 4793820.119162509, 4788794.663973587, 4779050.558645003, 4771061.458624393] # SWM quadratic
# y5 = [4898208.444859475, 4800442.938298643, 4703719.325982414, 4659482.2135152295, 4643266.188930178, 4628794.175270383, 4617033.912975377, 4608136.279342121, 4597745.366365018, 4592030.132219892, 4585376.3636636315] # NE2 linear
# y6 = [4897587.863327254, 4883873.403142372, 4863893.0319396695, 4844631.312034229, 4828720.59882514, 4808078.988016159, 4794145.502343858, 4779908.427991537, 4775737.58123858, 4768119.555851338, 4760488.626538653] # NE2 quadratic

# cifar10
# y1 = [4575074.533621259, 4480097.75140358, 4382347.10639038, 4281615.69499610, 4261261.53334005, 4247723.56060092, 4236843.04422533, 4229868.28009433, 4223311.84151616, 4211531.64403070, 4205752.57886086]  # NE linear
# y2 = [4432149.273369319, 4423596.35661769, 4404855.93973318, 4383104.97027397, 4352895.60442351, 4314417.12609595, 4268622.44487472, 4255151.21356364, 4251376.90326982, 4242390.12015677, 4235199.59382207]  # NE quadratic
# y3 = [4578004.728565603, 4489870.062891214, 4450057.414607992, 4424272.887558194, 4405191.908995714, 4392330.2842991175, 4380631.795406175, 4370143.687142081, 4364252.39599601, 4354611.191867803, 4349558.173447612]  # SWM linear
# y4 = [4434755.078348627, 4425095.826811973, 4409351.853189971, 4385149.001126269, 4369285.879879436, 4355103.204042014, 4346880.373787038, 4335256.691061734, 4327232.033616946, 4321125.838006394, 4315295.731584076]  # SWM quadratic
# y5 = [4577228.073314408,  4479077.013191062, 4381161.397697154, 4337827.3068089, 4321078.069961656, 4305208.568994964, 4296853.377225745, 4283547.963769213, 4282105.48737427, 4270689.40807599, 4264755.304418548]  # NE2 linear
# y6 = [4433508.991003379, 4424467.609538203, 4406178.098581442, 4384979.761104947, 4353819.765221059, 4323495.041246357, 4312106.43149512, 4307831.047459924, 4301087.493210338, 4297875.722452859, 4292920.2032739585]  # NE2 quadratic

# fmnist
# y1 = [4338100.237980551, 4247930.39292160, 4160274.04601159, 4072730.22717723, 4027800.16780728, 4013892.24878931, 4003919.04311119, 3991690.17904752, 3982512.98251720, 3980821.48982448, 3973171.91709612]  # NE linear
# y2 = [4427202.217327823, 4444521.35532104, 4447664.50347440, 4444649.11679446, 4437093.89186090,  4422092.07480752, 4398607.59858970, 4368259.40835057, 4340672.69854324, 4333965.33174866, 4325535.40389859]  # NE
# y3 = [4336737.68703665, 4255783.41098512, 4210151.794424239, 4186955.3580019567, 4166759.1081081736, 4155308.5379945096, 4147727.5857970323, 4138543.757967057, 4127701.057626564, 4119990.792270613, 4116282.453829685]  # SWM linear
# y4 = [4428219.364016853, 4444975.150354153, 4448326.161712966, 4445533.013679688, 4438164.838705938, 4422345.81277078, 4410761.612900104, 4402931.776659163, 4393266.161883967, 4391813.453591005, 4382300.294831891]  # SWM
# y5 = [4335741.372995354, 4246262.6863058945, 4162084.713992019, 4107572.7322298423, 4090108.506478805, 4079123.3995470568, 4066530.1803859, 4056131.578952452, 4051823.957110033, 4044855.159844385, 4033334.270358973]  # NE2 linear
# y6 = [4425619.8086559335, 4440237.288091176, 4444926.562534474, 4443235.923010012, 4435208.92323502, 4419673.354536579, 4402977.550014112, 4394704.23020691, 4385737.765385608, 4377555.270537862, 4375305.262158978]  # NE2

y1 = [ 4160274.04601159, 4072730.22717723, 4027800.16780728, 4013892.24878931, 4003919.04311119, 3991690.17904752, 3982512.98251720, 3980821.48982448, 3973171.91709612]  # NE linear
y2 = [ 4447664.50347440, 4444649.11679446, 4437093.89186090,  4422092.07480752, 4398607.59858970, 4368259.40835057, 4340672.69854324, 4333965.33174866, 4325535.40389859]  # NE
y3 = [4210151.794424239, 4186955.3580019567, 4166759.1081081736, 4155308.5379945096, 4147727.5857970323, 4138543.757967057, 4127701.057626564, 4119990.792270613, 4116282.453829685]  # SWM linear
y4 = [4448326.161712966, 4445533.013679688, 4438164.838705938, 4422345.81277078, 4410761.612900104, 4402931.776659163, 4393266.161883967, 4391813.453591005, 4382300.294831891]  # SWM
y5 = [4162084.713992019, 4107572.7322298423, 4090108.506478805, 4079123.3995470568, 4066530.1803859, 4056131.578952452, 4051823.957110033, 4044855.159844385, 4033334.270358973]  # NE2 linear
y6 = [ 4444926.562534474, 4443235.923010012, 4435208.92323502, 4419673.354536579, 4402977.550014112, 4394704.23020691, 4385737.765385608, 4377555.270537862, 4375305.262158978]  # NE2

fig, ax = plt.subplots()
# plt.figure(figsize=(10, 9))
# plt.plot(x, y1, label="NE: Random Flipping", color="#F82817", marker='o', markersize=14, linestyle="-")
# plt.plot(x, y2, label="NE: Instance Dependent", color="#F6B217", marker='s', markersize=13, linestyle="-")
# plt.plot(x, y3, label="SWM: Random Flipping", color="#1786F6", marker='^', markersize=15, linestyle="-")
# plt.plot(x, y4, label="SWM: Instance Dependent", color="#B14BF2", marker='D', markersize=12, linestyle="-")

plt.figure(figsize=(12, 10))
y7 = []  # SWM/NE linear
y8 = []  # SWM/NE quadratic
y9 = []  # SWM/NE2 linear
y10 = []  # SWM/NE2 quadratic
for i in range(len(y1)):
    y7.append(y3[i] / y1[i])
    y8.append(y4[i] / y2[i])
    y9.append(y3[i] / y5[i])
    y10.append(y4[i] / y6[i])
plt.plot(x, y7, label="SWM/NE: Random Flipping", color="#C83124", marker='^', markersize=16, linestyle="--")
plt.plot(x, y8, label="SWM/NE: Instance Dependent", color="#2179B6", marker='^', markersize=16, linestyle="-")
plt.plot(x, y9, label="SWM/NE-INC: Random Flipping", color="#228B22", marker='P', markersize=16, linestyle="--")
plt.plot(x, y10, label="SWM/NE-INC: Instance Dependent", color="#F6B217", marker='P', markersize=16, linestyle="-")

plt.grid(visible=True, alpha=0.3)

# plt.legend(fontsize=20)
# plt.xlabel('w', fontsize=27)
# plt.ylabel("Social Welfare", fontsize=27)
# fig.tight_layout(pad=0.5)
# plt.tick_params(labelsize=23, direction='in')

plt.legend(fontsize=20, loc='upper right', bbox_to_anchor=(1, 0.85), )
# plt.ylim(0, 0.2)
plt.xlabel(r'$\epsilon$', fontsize=31)
plt.ylabel("Price of Stability in Social Welfare", fontsize=31)
fig.tight_layout(pad=0.5)
plt.tick_params(labelsize=24, direction='in')

plt.savefig("./social_welfare_epsilon_fig2_fmnist.pdf")
